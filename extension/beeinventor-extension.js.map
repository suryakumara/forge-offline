{"version":3,"file":"beeinventor-extension.js","mappings":"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","sources":["webpack://forgeextensions/./src/lib/BeeInventorModel.js","webpack://forgeextensions/./src/lib/CoordinateConverter.js","webpack://forgeextensions/./src/lib/tools/DarkMode.js","webpack://forgeextensions/./src/lib/TransformTool.js","webpack://forgeextensions/./src/lib/tools/TransformTools.js","webpack://forgeextensions/./src/lib/tools/InfoCard.js","webpack://forgeextensions/./src/lib/tools/AOA.js","webpack://forgeextensions/./src/lib/tools/Building.js","webpack://forgeextensions/./src/lib/tools/RotateCamera.js","webpack://forgeextensions/./src/lib/InitialSetupModel.js","webpack://forgeextensions/./src/lib/MainConverter.js","webpack://forgeextensions/./src/lib/tools/RestrictedArea.js","webpack://forgeextensions/./src/lib/tools/ObjectInfo.js","webpack://forgeextensions/./src/lib/BeeInventorPanel.js","webpack://forgeextensions/./src/main.js"],"sourcesContent":["export class BeeInventorModel {\n  constructor(viewer, options) {\n    this.viewer = viewer;\n    this.options = options;\n    this.aoa = null;\n    this.model = null;\n    this.humanModel = null;\n    this.restrictedArea = null;\n    this.beacon = null;\n    this.excavator = null;\n    this.grid = null;\n    this.objects = new Map();\n  }\n\n  addCustomRestrictedArea = async (dbId, geoLocation, height) => {\n    if (geoLocation.length > 0) {\n      const sceneBuilder = await this.viewer.loadExtension(\n        \"Autodesk.Viewing.SceneBuilder\"\n      );\n      const modelBuilder = await sceneBuilder.addNewModel({\n        modelNameOverride: \"box\",\n        conserveMemory: false,\n      });\n\n      const globalMaterial = new THREE.MeshBasicMaterial({\n        color: new THREE.Color(1, 0, 0),\n        transparent: true,\n        opacity: 0.5,\n      });\n\n      const geoPoint = [];\n      geoLocation.forEach((coord) => {\n        geoPoint.push(new THREE.Vector2(coord.x, coord.y));\n      });\n\n      // geoPoint.push(new THREE.Vector2(0, 1));\n      // geoPoint.push(new THREE.Vector2(-1, 1));\n      // geoPoint.push(new THREE.Vector2(-1, -1));\n      // geoPoint.push(new THREE.Vector2(1, -1));\n\n      // for (let i = 0; i < californiaPts.length; i++) californiaPts[i].multiplyScalar(0.25);\n      const geoShape = new THREE.Shape(geoPoint);\n      const geoGeometry = new THREE.ShapeGeometry(geoShape);\n\n      const extrudeSettings = {\n        amount: height ?? 1,\n        bevelEnabled: false,\n      };\n\n      const extrude = new THREE.ExtrudeGeometry(geoShape, extrudeSettings);\n\n      extrude.computeFaceNormals();\n      geoGeometry.computeFaceNormals();\n\n      const restrictedGeo = new THREE.BufferGeometry().fromGeometry(extrude);\n      this.customRestrictedArea = new THREE.Mesh(restrictedGeo, globalMaterial);\n\n      this.customRestrictedArea.userData.id = dbId;\n      const customRestrictedAreaId = this.idToNumber(dbId);\n      this.customRestrictedArea.dbId = parseInt(\n        `${5003}${customRestrictedAreaId}`\n      );\n      modelBuilder.addMesh(this.customRestrictedArea);\n\n      let customRestrictedAreaModel = modelBuilder.model;\n\n      this.objects.set(dbId, customRestrictedAreaModel);\n    }\n  };\n\n  idToNumber(id) {\n    let numberId = parseInt(id);\n    if (isNaN(id)) {\n      numberId = parseInt(id.replace(/[^0-9]/g, \"\"));\n    }\n    return numberId;\n  }\n\n  addAOA = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"aoa\",\n      conserveMemory: false,\n    });\n    const globalMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color(0.863, 0.078, 0.235),\n      opacity: 0.8,\n      transparent: true,\n    });\n    const torus = new THREE.TorusGeometry(0.5, 0.05, 13, 50);\n    const box = new THREE.BoxGeometry(0.5, 1, 1);\n    const textGeometry = new THREE.TextGeometry(`AOA${dbId}`, {\n      font: \"monaco\",\n      size: 1,\n      height: 0,\n      curveSegments: 3,\n    });\n    const textMesh = new THREE.Mesh(textGeometry, globalMaterial);\n    textMesh.matrix.makeRotationX(-4.7);\n    textMesh.matrix.setPosition(new THREE.Vector3(0, 0, 0.7));\n    textMesh.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n\n    const aoaMesh = new THREE.Mesh(box, globalMaterial);\n    aoaMesh.matrix.scale(new THREE.Vector3(0.5, 0.5, 0.5));\n\n    const aoaDir1 = new THREE.Mesh(torus, globalMaterial);\n    const radians = 90 * (Math.PI / 180);\n    aoaDir1.matrix.makeRotationX(radians);\n    aoaDir1.matrix.makeRotationY(radians);\n    aoaDir1.matrix.setPosition(new THREE.Vector3(0.2, 0, 0));\n    aoaDir1.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n\n    const aoaDir2 = new THREE.Mesh(torus, globalMaterial);\n\n    aoaDir2.matrix.makeRotationX(radians);\n    aoaDir2.matrix.makeRotationY(radians);\n    aoaDir2.matrix.setPosition(new THREE.Vector3(0.3, 0, 0));\n    aoaDir2.matrix.scale(new THREE.Vector3(0.3, 0.3, 0.3));\n\n    const aoaDir3 = new THREE.Mesh(torus, globalMaterial);\n\n    aoaDir3.matrix.makeRotationX(radians);\n    aoaDir3.matrix.makeRotationY(radians);\n    aoaDir3.matrix.setPosition(new THREE.Vector3(0.4, 0, 0));\n    aoaDir3.matrix.scale(new THREE.Vector3(0.4, 0.4, 0.4));\n\n    let aoaGeo = new THREE.Geometry();\n    aoaGeo.merge(textMesh.geometry, textMesh.matrix);\n    aoaGeo.merge(aoaMesh.geometry, aoaMesh.matrix);\n    aoaGeo.merge(aoaDir1.geometry, aoaDir1.matrix);\n    aoaGeo.merge(aoaDir2.geometry, aoaDir2.matrix);\n    aoaGeo.merge(aoaDir3.geometry, aoaDir3.matrix);\n    aoaGeo.computeVertexNormals();\n\n    const aoaBuff = new THREE.BufferGeometry().fromGeometry(aoaGeo);\n    this.aoa = new THREE.Mesh(aoaBuff, globalMaterial);\n\n    // this.aoa.matrix.makeRotationZ(radians);\n    this.aoa.userData.id = dbId;\n    const aoaDBID = this.idToNumber(dbId);\n    this.aoa.dbId = parseInt(`${5001}${aoaDBID}`);\n\n    modelBuilder.addMesh(this.aoa);\n    const aoaModel = modelBuilder.model;\n\n    let pos = new THREE.Matrix4();\n    pos.makeRotationZ(rotation[1] ?? 0 * (Math.PI / 180));\n    pos.setPosition(\n      new THREE.Vector3(position[0] ?? 0, position[1] ?? 0, position[2] ?? 2)\n    );\n\n    aoaModel.setPlacementTransform(pos);\n\n    this.objects.set(dbId, aoaModel);\n  };\n\n  addNewWorker = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"box\",\n      conserveMemory: false,\n    });\n    let modelGeometry = new THREE.Geometry();\n    const globalMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color(0.863, 0.078, 0.235),\n    });\n    const head = new THREE.SphereGeometry(0.5, 32, 16);\n    const body = new THREE.SphereGeometry(0.4, 32, 16);\n    const textGeometry = new THREE.TextGeometry(`W: ${dbId}`, {\n      font: \"monaco\",\n      size: 1,\n      height: 0,\n      curveSegments: 3,\n    });\n\n    const humanIdMesh = new THREE.Mesh(textGeometry, globalMaterial);\n    humanIdMesh.matrix.makeRotationX(-4.7);\n    humanIdMesh.matrix.setPosition(new THREE.Vector3(0, 0, 2.8));\n    humanIdMesh.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n    const headMesh = new THREE.Mesh(head, globalMaterial);\n    const bodyMesh = new THREE.Mesh(body, globalMaterial);\n\n    headMesh.matrix.setPosition(new THREE.Vector3(0, 0, 2.3));\n    headMesh.matrix.scale(new THREE.Vector3(0.5, 0.5, 0.5));\n\n    bodyMesh.matrix.setPosition(new THREE.Vector3(0, 0, 1));\n    bodyMesh.matrix.scale(new THREE.Vector3(0.5, 0.5, 2.5));\n    modelGeometry.merge(headMesh.geometry, headMesh.matrix);\n    modelGeometry.merge(bodyMesh.geometry, bodyMesh.matrix);\n    modelGeometry.merge(humanIdMesh.geometry, humanIdMesh.matrix);\n    modelGeometry.computeVertexNormals();\n    const humanModel = new THREE.BufferGeometry().fromGeometry(modelGeometry);\n    this.humanModel = new THREE.Mesh(humanModel, globalMaterial);\n    this.humanModel.userData.id = dbId;\n    const workerDBID = this.idToNumber(dbId);\n    this.humanModel.dbId = parseInt(`${5002}${workerDBID}`);\n\n    // const box = new THREE.Box3();\n    // this.humanModel.geometry.computeBoundingBox();\n    // const nodebBox = box\n    //   .copy(this.humanModel.geometry.boundingBox)\n    //   .applyMatrix4(this.humanModel.matrixWorld);\n\n    // console.log(nodebBox.getCenter());\n    modelBuilder.addMesh(this.humanModel);\n\n    const workerModel = modelBuilder.model;\n\n    workerModel.setPlacementTransform(\n      new THREE.Matrix4().compose(\n        new THREE.Vector3(position[0] ?? 0, position[1] ?? 0, position[2] ?? 0),\n        new THREE.Quaternion(0, 0, 0, 1),\n        new THREE.Vector3(1, 1, 1)\n      )\n    );\n    this.objects.set(dbId, workerModel);\n  };\n\n  addRestrictedArea = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"box\",\n      conserveMemory: false,\n    });\n    const size_box = 1;\n    const box = new THREE.BoxGeometry(size_box, size_box, size_box);\n\n    const globalMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color(1, 0, 0),\n      opacity: 0.5,\n      transparent: true,\n    });\n\n    const restrictedGeo = new THREE.BufferGeometry().fromGeometry(box);\n    this.restrictedArea = new THREE.Mesh(restrictedGeo, globalMaterial);\n\n    this.restrictedArea.userData.id = dbId;\n    const restrictedAreaId = this.idToNumber(dbId);\n    this.restrictedArea.dbId = parseInt(`${5003}${restrictedAreaId}`);\n    modelBuilder.addMesh(this.restrictedArea);\n\n    let restrictedAreaModel = modelBuilder.model;\n    restrictedAreaModel.setPlacementTransform(\n      new THREE.Matrix4().setPosition({\n        x: position[0] ?? 0,\n        y: position[1] ?? 0,\n        z: position[2] + size_box / 2 ?? 0,\n      })\n    );\n    this.objects.set(dbId, restrictedAreaModel);\n  };\n\n  addExcavator = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"box\",\n      conserveMemory: false,\n    });\n\n    const globalMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color(1, 0, 0),\n    });\n    const texture = THREE.ImageUtils.loadTexture(\n      `${CDN_DOMAIN}/assets/images/png/img_gps_plant_online-3.png`\n    );\n    texture.minFilter = THREE.LinearFilter;\n    const excavatorMaterial = new THREE.MeshBasicMaterial({\n      map: texture,\n      side: THREE.DoubleSide,\n    });\n\n    const size_box = 1;\n    const boxGeometry = new THREE.BoxGeometry(size_box, size_box, size_box);\n    const textGeometry = new THREE.TextGeometry(`EXT-${dbId}`, {\n      font: \"monaco\",\n      size: 1,\n      height: 0,\n      curveSegments: 3,\n    });\n    textGeometry.computeBoundingBox();\n\n    const textMesh = new THREE.Mesh(textGeometry, globalMaterial);\n    textMesh.matrix.makeRotationX(-4.7);\n    textMesh.matrix.setPosition(new THREE.Vector3(0, 0.5, 1));\n    textMesh.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n\n    const excavatorMesh = new THREE.Mesh(boxGeometry, globalMaterial);\n    excavatorMesh.matrix.scale(new THREE.Vector3(2, 2, 1));\n\n    let excavatorGeo = new THREE.Geometry();\n    excavatorGeo.merge(textMesh.geometry, textMesh.matrix);\n    excavatorGeo.merge(excavatorMesh.geometry, excavatorMesh.matrix);\n    excavatorGeo.computeVertexNormals();\n\n    const excavatorBuffer = new THREE.BufferGeometry().fromGeometry(\n      excavatorGeo\n    );\n    this.excavator = new THREE.Mesh(excavatorBuffer, excavatorMaterial);\n\n    this.excavator.userData.id = dbId;\n    const excavatorId = this.idToNumber(dbId);\n    this.excavator.dbId = parseInt(`${5004}${excavatorId}`);\n    modelBuilder.addMesh(this.excavator);\n\n    let excavatorModel = modelBuilder.model;\n    excavatorModel.setPlacementTransform(\n      new THREE.Matrix4().setPosition({\n        x: position[0] ?? 0,\n        y: position[1] ?? 0,\n        z: position[2] + size_box ?? 0,\n      })\n    );\n    this.objects.set(dbId, excavatorModel);\n  };\n\n  addBeacon = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"box\",\n      conserveMemory: false,\n    });\n\n    const sphere = new THREE.SphereGeometry(0.3, 32, 16);\n    const textGeometry = new THREE.TextGeometry(`B-${dbId}`, {\n      font: \"monaco\",\n      size: 1,\n      height: 0,\n      curveSegments: 3,\n    });\n    const globalMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color(1, 0, 0),\n    });\n    const textMesh = new THREE.Mesh(textGeometry, globalMaterial);\n    const beaconMesh = new THREE.Mesh(sphere, globalMaterial);\n    // Setup Human Position\n    textMesh.matrix.makeRotationX(-4.7);\n    textMesh.matrix.setPosition(new THREE.Vector3(0, 0.5, 1));\n    textMesh.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n    let beaconGeo = new THREE.Geometry();\n    beaconGeo.merge(textMesh.geometry, textMesh.matrix);\n    beaconGeo.merge(beaconMesh.geometry, beaconMesh.matrix);\n    beaconGeo.computeVertexNormals();\n\n    const beaconBuffer = new THREE.BufferGeometry().fromGeometry(beaconGeo);\n    this.beacon = new THREE.Mesh(beaconBuffer, globalMaterial);\n\n    this.beacon.userData.id = dbId;\n    const beaconId = this.idToNumber(dbId);\n    this.beacon.dbId = parseInt(`${5005}${beaconId}`);\n    modelBuilder.addMesh(this.beacon);\n\n    let beaconModel = modelBuilder.model;\n    beaconModel.setPlacementTransform(\n      new THREE.Matrix4().setPosition({\n        x: position[0] ?? 0,\n        y: position[1] ?? 0,\n        z: position[2] ?? 0,\n      })\n    );\n    this.objects.set(dbId, beaconModel);\n  };\n\n  addWindDirection = async (dbId) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"windDirection\",\n      conserveMemory: false,\n    });\n    const globalMaterial = new THREE.MeshBasicMaterial({\n      color: new THREE.Color(0.545, 0.271, 0.075),\n    });\n    const northGeometry = new THREE.TextGeometry(`N`, {\n      font: \"monaco\",\n      size: 2,\n      height: 0,\n      curveSegments: 3,\n    });\n\n    const southGeometry = new THREE.TextGeometry(`S`, {\n      font: \"monaco\",\n      size: 2,\n      height: 0,\n      curveSegments: 3,\n    });\n\n    const eastGeometry = new THREE.TextGeometry(`E`, {\n      font: \"monaco\",\n      size: 2,\n      height: 0,\n      curveSegments: 3,\n    });\n\n    const westGeometry = new THREE.TextGeometry(`W`, {\n      font: \"monaco\",\n      size: 2,\n      height: 0,\n      curveSegments: 3,\n    });\n    const locationText = 50;\n    const radian = 90 * (Math.PI / 180);\n    const northMesh = new THREE.Mesh(northGeometry, globalMaterial);\n    northMesh.matrix.makeRotationX(radian);\n    northMesh.matrix.setPosition(new THREE.Vector3(0, locationText, 1));\n\n    const southMesh = new THREE.Mesh(southGeometry, globalMaterial);\n    southMesh.matrix.makeRotationX(radian);\n    southMesh.matrix.setPosition(new THREE.Vector3(0, -locationText, 1));\n\n    const eastMesh = new THREE.Mesh(eastGeometry, globalMaterial);\n    eastMesh.matrix.makeRotationX(radian);\n    eastMesh.matrix.setPosition(new THREE.Vector3(locationText, 0, 1));\n\n    const westMesh = new THREE.Mesh(westGeometry, globalMaterial);\n    westMesh.matrix.makeRotationX(radian);\n    westMesh.matrix.setPosition(new THREE.Vector3(-locationText, 0, 1));\n\n    let windDirectionGeo = new THREE.Geometry();\n    windDirectionGeo.merge(northMesh.geometry, northMesh.matrix);\n    windDirectionGeo.merge(southMesh.geometry, southMesh.matrix);\n    windDirectionGeo.merge(eastMesh.geometry, eastMesh.matrix);\n    windDirectionGeo.merge(westMesh.geometry, westMesh.matrix);\n\n    windDirectionGeo.computeVertexNormals();\n\n    const windDirectionBuff = new THREE.BufferGeometry().fromGeometry(\n      windDirectionGeo\n    );\n    this.windDirection = new THREE.Mesh(windDirectionBuff, globalMaterial);\n\n    modelBuilder.addMesh(this.windDirection);\n    const windDirectionModel = modelBuilder.model;\n    this.objects.set(dbId, windDirectionModel);\n  };\n\n  addGrid = () => {\n    this.grid = new THREE.GridHelper(50, 1);\n    this.grid.material.opacity = 0.8;\n    this.grid.material.transparent = true;\n    this.grid.position.set(0, 0, 0);\n    this.grid.rotateX(Math.PI / 2);\n    if (!this.viewer.overlays.hasScene(\"grid\")) {\n      this.viewer.overlays.addScene(\"grid\");\n    }\n    this.viewer.overlays.addMesh(this.grid, \"grid\");\n  };\n\n  addRestrictedAreaWithText = async (dbId, position, rotation) => {\n    const sceneBuilder = await this.viewer.loadExtension(\n      \"Autodesk.Viewing.SceneBuilder\"\n    );\n    const modelBuilder = await sceneBuilder.addNewModel({\n      modelNameOverride: \"box\",\n      conserveMemory: false,\n    });\n    const box = new THREE.BoxGeometry(1, 1, 1);\n    const textGeometry = new THREE.TextGeometry(`R: ${dbId}`, {\n      font: \"monaco\",\n      size: 1,\n      height: 0,\n      curveSegments: 3,\n    });\n\n    let restricted = new THREE.Geometry();\n    const globalMaterial = new THREE.MeshBasicMaterial({\n      color: new THREE.Color(1, 0, 0),\n    });\n    const boxMesh = new THREE.Mesh(box, globalMaterial);\n    const textMesh = new THREE.Mesh(textGeometry, globalMaterial);\n    textMesh.matrix.makeRotationX(-4.7);\n    textMesh.matrix.setPosition(new THREE.Vector3(0, 0.5, 1));\n    textMesh.matrix.scale(new THREE.Vector3(0.2, 0.2, 0.2));\n    boxMesh.matrix.scale(new THREE.Vector3(1, 1, 1));\n\n    restricted.merge(boxMesh.geometry, boxMesh.matrix);\n    restricted.merge(textMesh.geometry, textMesh.matrix);\n    restricted.computeVertexNormals();\n    const restrictedGeo = new THREE.BufferGeometry().fromGeometry(restricted);\n    this.restrictedArea = new THREE.Mesh(restrictedGeo, globalMaterial);\n\n    this.restrictedArea.userData.id = dbId;\n    const restrictedAreaId = this.idToNumber(dbId);\n    this.restrictedArea.dbId = restrictedAreaId;\n    modelBuilder.addMesh(this.restrictedArea);\n\n    let restrictedAreaModel = modelBuilder.model;\n    restrictedAreaModel.setPlacementTransform(\n      new THREE.Matrix4().setPosition({\n        x: position[0] ?? 0,\n        y: position[1] ?? 0,\n        z: position[2] ?? 0,\n      })\n    );\n    this.objects.set(dbId, restrictedAreaModel);\n  };\n\n  setFlyTo(modelBuilder, dbId) {\n    this.viewer.select([dbId], modelBuilder.model);\n    this.viewer.utilities.fitToView();\n  }\n\n  changePosition(modelBuilder, mesh, x, y, z) {\n    console.log(mesh);\n    mesh.matrix.setPosition(new THREE.Vector3(x, y, z));\n    modelBuilder.updateMesh(mesh);\n  }\n\n  changePositionSpecific(modelBuilder, dbId, x = 0, y = 0, z = 1) {\n    if (this.objects[dbId]) {\n      this.objects[dbId].matrix.setPosition(new THREE.Vector3(x, y, z));\n      modelBuilder.updateMesh(this.objects[dbId]);\n    } else {\n      console.log(\"there is no object on this scene !\");\n    }\n  }\n\n  restrictedAreaScale(dbId, modelBuilder, size_X, size_Y) {\n    if (this.objects[dbId]) {\n      this.objects[dbId].matrix.scale(new THREE.Vector3(size_X, size_Y, 1));\n      modelBuilder.updateMesh(this.objects[dbId]);\n      // const position = new THREE.Vector3();\n      // const scale = position.setFromMatrixScale(this.objects[dbId].matrixWorld);\n    } else {\n      console.log(\"no object on this scene !\");\n    }\n  }\n\n  lookAtMe(modelBuilder, dbId) {\n    console.log(modelBuilder);\n    this.objects[dbId].matrix.makeRotationFromQuaternion(\n      this.viewer.getCamera().clone().quaternion\n    );\n    modelBuilder.updateMesh(this.objects[dbId]);\n  }\n\n  unloadModel = () => {\n    for (const model of this.objects.values()) {\n      this.viewer.impl.unloadModel(model);\n    }\n\n    if (this.grid) {\n      this.viewer.overlays.removeMesh(this.grid, \"grid\");\n      this.viewer.overlays.removeScene(\"grid\");\n    }\n  };\n}\n","export class CoordinateConverter {\n  static degreeToRadian(degree) {\n    return (degree * Math.PI) / 180;\n  }\n\n  static forgeCoodinateToCartesianCoordinate(position) {\n    return { x: position[0], y: position[1], z: position[2] };\n  }\n\n  static toForgeCoordinate({ x, y }) {\n    return {\n      x: x,\n      y: y,\n    };\n  }\n\n  constructor(latitude, longitude) {\n    this.center = {\n      latitude,\n      longitude,\n    };\n    this.R = 6371000;\n  }\n\n  getCenter() {\n    return this.center;\n  }\n\n  setCenter(latitude, longitude) {\n    this.cente = {\n      latitude,\n      longitude,\n    };\n  }\n\n  /**\n   * @returns distance (meter)\n   */\n\n  distance = (latitude, longitude) => {\n    const φ1 = CoordinateConverter.degreeToRadian(this.center.latitude);\n    const φ2 = CoordinateConverter.degreeToRadian(latitude);\n    const Δφ = CoordinateConverter.degreeToRadian(\n      latitude - this.center.latitude\n    );\n    const Δλ = CoordinateConverter.degreeToRadian(\n      longitude - this.center.longitude\n    );\n    const a =\n      Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n      Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const d = this.R * c;\n    return d;\n  };\n\n  geographicToCartesian = (latitude, longitude) => {\n    let distanceX = this.distance(this.center.latitude, longitude);\n    let distanceY = this.distance(latitude, this.center.longitude);\n\n    if (this.center.longitude * longitude > 0) {\n      if (this.center.longitude > longitude) {\n        distanceX *= -1;\n      }\n    } else if (\n      this.center.longitude < 0 &&\n      longitude > 0 &&\n      Math.abs(this.center.longitude - longitude) > 180\n    ) {\n      distanceX *= -1;\n    }\n\n    if (this.center.latitude > latitude) {\n      distanceY *= -1;\n    }\n    return { x: distanceX, y: distanceY };\n  };\n\n  cartesianToGeographic = (x, y) => {\n    const rEarth = 6378;\n    const pi = Math.PI;\n    const xPos = x / 1000;\n    const yPos = y / 1000;\n    const lat = this.center.latitude + (yPos / rEarth) * (180 / pi);\n    const lng =\n      this.center.longitude +\n      ((xPos / rEarth) * (180 / pi)) /\n        Math.cos((this.center.latitude * pi) / 180);\n\n    return { latitude: lat, longitude: lng };\n  };\n\n  calculateUWBPosition(d, degreeAOA, directionDegree, deviceX, deviceY) {\n    const r = d / 100;\n    const radian = ((-degreeAOA + directionDegree) * Math.PI) / 180;\n    let newX = r * Math.cos(radian);\n    let newY = r * Math.sin(radian);\n    newX += deviceX;\n    newY += deviceY;\n    return [newX, newY];\n  }\n\n  toLatitudeLongitudeEveryCorner(positionEveryCorner) {\n    const newCoordinatesAfterRotate = [\n      [0, 0],\n      [0, 0],\n      [0, 0],\n      [0, 0],\n    ];\n\n    for (let i = 0; i < positionEveryCorner[0].length; i += 1) {\n      newCoordinatesAfterRotate[i] = this.cartesianToGeographic(\n        positionEveryCorner[0][i],\n        positionEveryCorner[1][i]\n      );\n    }\n    return newCoordinatesAfterRotate;\n  }\n\n  setCoordinateBuilding = () => {\n    const newCoordinatesAfterRotate = [\n      [0, 0],\n      [0, 0],\n      [0, 0],\n      [0, 0],\n    ];\n    for (let i = 0; i < this.BUILDING_CORNER_LOCATION.length; i += 1) {\n      newCoordinatesAfterRotate[i] = this.cartesianToGeographic(\n        this.BUILDING_CORNER_LOCATION[i][0],\n        this.BUILDING_CORNER_LOCATION[i][1]\n      );\n    }\n\n    return newCoordinatesAfterRotate;\n  };\n\n  geographicToCartesian2D = (geoLocation) => {\n\n    let newCoordinateCartesian = [];\n\n    for (let i = 0; i < geoLocation.length; i++) {\n      newCoordinateCartesian.push(\n        this.geographicToCartesian(geoLocation[i][1], geoLocation[i][0])\n      );\n    }\n\n    return newCoordinateCartesian;\n  };\n}\n","export class DarkMode {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n  }\n\n  darkModeToolSetup() {\n    const darkModeContainer = document.createElement(\"div\");\n    const darkModeInput = document.createElement(\"input\");\n    const darkModeLabel = document.createElement(\"label\");\n    darkModeLabel.innerText = \"Dark Mode\";\n\n    this.setAttributes(darkModeInput, {\n      type: \"checkbox\",\n      id: \"toggleDarkmode\",\n    });\n    darkModeContainer.append(darkModeInput, darkModeLabel);\n    darkModeInput.addEventListener(\"change\", () => {\n      if (darkModeInput.checked) {\n        this.activate();\n      } else {\n        this.deactivate();\n      }\n    });\n\n    this.container.append(darkModeContainer);\n  }\n\n  activate() {\n    console.log(\"dark mode activate\");\n    this.viewer.setBackgroundColor(0, 0, 0, 61, 61, 61);\n  }\n\n  deactivate() {\n    console.log(\"dark mode deactivate\");\n    this.viewer.setBackgroundColor(255, 255, 255, 255, 255, 255);\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","const TransformToolName = \"xform-tool\";\nconst TransformToolOverlay = \"xform-tool-overlay\";\n\nexport class TransformTool extends Autodesk.Viewing.ToolInterface {\n  constructor(viewer) {\n    super(viewer);\n    /** @type {THREE.TransformControls} */\n    this._controls = null;\n    /** @type {Autodesk.Viewing.Viewer3D} */\n    this._viewer = viewer;\n\n    this._fragments = [];\n    this._startPosition = new THREE.Vector3();\n    this._startTransform = null;\n    this._onCameraChange = this._onCameraChange.bind(this);\n    this._onControlsChange = this._onControlsChange.bind(this);\n    this._onSelectionChange = this._onSelectionChange.bind(this);\n\n    this.selectedModel = null;\n    this.names = [TransformToolName];\n    // Hack: delete functions defined *on the instance* of the tool.\n    // We want the tool controller to call our class methods instead.\n    delete this.register;\n    delete this.deregister;\n    delete this.activate;\n    delete this.deactivate;\n    delete this.getPriority;\n    delete this.handleMouseMove;\n    delete this.handleButtonDown;\n    delete this.handleButtonUp;\n    delete this.handleSingleClick;\n  }\n\n  register() {\n    console.log(\"TransformTool registered.\");\n  }\n\n  deregister() {\n    console.log(\"TransformTool unregistered.\");\n  }\n\n  activate(name, viewer) {\n    this._viewer = viewer;\n\n    this._controls = new THREE.TransformControls(\n      this._viewer.getCamera(),\n      this._viewer.canvas,\n      \"translate\"\n    );\n    this._controls.setSize(25.0);\n    this._controls.visible = false;\n    this._controls.addEventListener(\"change\", this._onControlsChange);\n    this._controls.attach(new THREE.Object3D()); // haaaack\n    this._viewer.select(null);\n    this._viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this._onCameraChange\n    );\n\n    this._viewer.addEventListener(\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n      this._onSelectionChange\n    );\n\n    this._viewer.overlays.addScene(TransformToolOverlay);\n    this._viewer.overlays.addMesh(this._controls, TransformToolOverlay);\n    console.log(\"TransformTool activated.\");\n  }\n\n  deactivate(name) {\n    this._viewer.overlays.removeMesh(this._controls, TransformToolOverlay);\n    this._viewer.overlays.removeScene(TransformToolOverlay);\n    this._viewer.removeEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this._onCameraChange\n    );\n\n    this._viewer.removeEventListener(\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n      this._onSelectionChange\n    );\n    this._controls.removeEventListener(\"change\", this._onControlsChange);\n    this._viewer = null;\n    this._controls = null;\n    console.log(\"TransformTool deactivated.\");\n  }\n\n  getPriority() {\n    return 42; // Or feel free to use any number higher than 0 (which is the priority of all the default viewer tools)\n  }\n\n  update(highResTimestamp) {\n    return false;\n  }\n\n  handleMouseMove(event) {\n    if (this._dragging) {\n      return this._controls.onPointerMove(event);\n    } else {\n      return this._controls.onPointerHover(event);\n    }\n  }\n\n  handleButtonDown(event, button) {\n    this._dragging = true;\n    return this._controls.onPointerDown(event);\n  }\n\n  handleButtonUp(event, button) {\n    this._dragging = false;\n    return this._controls.onPointerUp(event);\n  }\n\n  handleSingleClick(event, button) {\n    return false;\n  }\n\n  _onCameraChange() {\n    this._controls.update();\n  }\n\n  _onControlsChange(ev) {\n    const offset = new THREE.Vector3().subVectors(\n      this._controls.position,\n      this._startPosition\n    );\n\n    if (this.selectedModel) {\n      const xform = this._startTransform.clone();\n      xform.elements[12] += offset.x;\n      xform.elements[13] += offset.y;\n      xform.elements[14] += offset.z;\n      this.selectedModel.setPlacementTransform(xform);\n\n      this._viewer.impl.invalidate(true, true, true);\n    }\n  }\n\n  _onSelectionChange(ev) {\n    const selSet = ev.selections;\n    const firstSel = selSet[0];\n\n    if (firstSel) {\n      const listdbIds = firstSel.dbIdArray;\n      const dbidItem = listdbIds[0];\n      const typeModel = dbidItem.toString().slice(0, 3);\n      if (typeModel !== \"500\") return;\n\n      const model = firstSel.model;\n      this.selectedModel = model;\n      let dbIds = firstSel.dbIdArray;\n      let firstDbId = dbIds[0];\n      const instanceTree = model.getData().instanceTree;\n      const fragList = model.getFragmentList();\n      let bounds = new THREE.Box3();\n      instanceTree.enumNodeFragments(\n        firstDbId,\n        (fragId) => {\n          let box = new THREE.Box3();\n          fragList.getWorldBounds(fragId, box);\n          bounds.union(box);\n        },\n        true\n      );\n\n      const position = bounds.getCenter();\n      this._controls.setPosition(position);\n      this._startPosition.copy(this._controls.position);\n      this._startTransform = model.getPlacementTransform().clone();\n      this._controls.visible = true;\n    } else {\n      this._controls.visible = false;\n      this.selectedModel = null;\n    }\n  }\n\n  _computeBounds(model, fragIds) {\n    const frags = model.getFragmentList();\n    const totalBounds = new THREE.Box3(),\n      fragBounds = new THREE.Box3();\n    for (const fragId of fragIds) {\n      frags.getWorldBounds(fragId, fragBounds);\n      totalBounds.union(fragBounds);\n    }\n    return totalBounds;\n  }\n}\n","import { TransformTool } from \"../TransformTool\";\n\nconst TransformToolName = \"xform-tool\";\n\nexport class TransformToolUI {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n    this._tool = null;\n  }\n\n  transformToolSetup() {\n    const transfromContainer = document.createElement(\"div\");\n    const transformTool = document.createElement(\"input\");\n    const transformToolLabel = document.createElement(\"label\");\n    transformToolLabel.innerText = \"AOA Transform\";\n\n    this.setAttributes(transformTool, {\n      type: \"checkbox\",\n      id: \"toggleTransformTool\",\n    });\n    transfromContainer.append(transformTool, transformToolLabel);\n    transformTool.addEventListener(\"change\", () => {\n      if (transformTool.checked) {\n        this._enableTransformTool();\n      } else {\n        this._disableTransformTool();\n      }\n    });\n    this.container.append(transfromContainer);\n  }\n\n  _enableTransformTool() {\n    alert(\"Please select a AOA in the scene.\");\n    const controller = this.viewer.toolController;\n    if (!this._tool) {\n      this._tool = new TransformTool();\n      controller.registerTool(this._tool);\n    }\n    if (!controller.isToolActivated(TransformToolName)) {\n      controller.activateTool(TransformToolName);\n    }\n  }\n\n  _disableTransformTool() {\n    const controller = this.viewer.toolController;\n    if (this._tool && controller.isToolActivated(TransformToolName)) {\n      controller.deactivateTool(TransformToolName);\n    }\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","export class InfoCardUI {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n    this.infoCard = null;\n    this.enabledIcon = false;\n    this.selectedModelCard = null;\n  }\n\n  updateIconEvent() {\n    const updateIconsCallback = () => {\n      if (this.enabledIcon) {\n        this.updateIcons();\n      }\n    };\n\n    this.viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      updateIconsCallback\n    );\n    this.viewer.addEventListener(\n      Autodesk.Viewing.ISOLATE_EVENT,\n      updateIconsCallback\n    );\n    this.viewer.addEventListener(\n      Autodesk.Viewing.HIDE_EVENT,\n      updateIconsCallback\n    );\n    this.viewer.addEventListener(\n      Autodesk.Viewing.SHOW_EVENT,\n      updateIconsCallback\n    );\n  }\n\n  unload() {\n    console.log(\"unload\");\n  }\n\n  infoCardSetup() {\n    const infoCardContainer = document.createElement(\"div\");\n    const infoCardInput = document.createElement(\"input\");\n    const InfoCardLabel = document.createElement(\"label\");\n    InfoCardLabel.innerText = \"Info Card\";\n    this.setAttributes(infoCardInput, {\n      type: \"checkbox\",\n      id: \"toggleInfoModel\",\n    });\n    infoCardContainer.append(infoCardInput, InfoCardLabel);\n    infoCardInput.addEventListener(\"change\", () => {\n      if (infoCardInput.checked) {\n        this.enabledIcon = true;\n        console.log(\"infoCard activated\");\n      } else {\n        this.enabledIcon = false;\n        console.log(\"InfoCard deactivated\");\n        this.clearInfoCard();\n      }\n    });\n    this.container.append(infoCardContainer);\n  }\n\n  showIcon(dbId, objectInfo, posModel) {\n    this.posModel = posModel;\n    if (!this.enabledIcon) return;\n\n    this.infoCard = document.createElement(\"div\");\n    this.infoCard.setAttribute(\"class\", \"labelModel\");\n    this.infoCard.setAttribute(\"data-id\", `${dbId}`);\n\n    let infoData = document.createElement(\"div\");\n    infoData.id = \"infoData\";\n    if (objectInfo) {\n      infoData.innerHTML = `\n      <div>ID: <span id=\"infoId\">${objectInfo.id}</span></div>\n      <div>Position: <span id=\"infoPosition\" >${objectInfo.position}</span></div>\n      <div>Rotation: <span id=\"infoRotation\" >${objectInfo.rotation}</span></div>\n      <div>Lat: <span id=\"infoLatitude\" >${objectInfo.latitude}</span></div>\n      <div>Long: <span id=\"infoLongitude\" class=\"info\">${objectInfo.longitude}</span></div>\n      `;\n    }\n\n    this.infoCard.append(infoData);\n    const viewerContainer = document.querySelector(\n      `#${this.viewer.clientContainer.id}`\n    );\n    viewerContainer.appendChild(this.infoCard);\n\n    this.updateIcons();\n  }\n\n  updateIcons() {\n    if (this.infoCard && this.posModel) {\n      const pos = this.viewer.worldToClient(this.posModel);\n      this.infoCard.style.left = `${Math.floor(\n        50 + pos.x - this.infoCard.offsetWidth / 2\n      )}px`;\n      this.infoCard.style.top = `${Math.floor(\n        50 + pos.y - this.infoCard.offsetWidth / 2\n      )}px`;\n      if (this.selectedModelCard) {\n        const modelOutContainer = this.checkIfOutofContainer();\n        this.infoCard.style.display = modelOutContainer ? \"block\" : \"none\";\n      }\n    }\n  }\n\n  checkIfOutofContainer() {\n    if (!this.selectedModelCard) {\n      return;\n    }\n\n    const camera = this.viewer.getCamera();\n    const matrix = new THREE.Matrix4().multiplyMatrices(\n      camera.projectionMatrix,\n      camera.matrixWorldInverse\n    );\n    const frustum = new THREE.Frustum().setFromMatrix(matrix);\n    const bbox = this.selectedModelCard.getBoundingBox();\n    const isModelInContainer = frustum.intersectsBox(bbox);\n    return isModelInContainer;\n  }\n\n  selectedModel(model) {\n    this.selectedModelCard = model;\n  }\n\n  clearInfoCard() {\n    if (this.infoCard) {\n      this.infoCard.remove();\n    }\n  }\n\n  clear() {\n    this.infoCard = null;\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","import { CoordinateConverter } from \"../CoordinateConverter\";\n\nexport class AOAtools {\n  constructor(viewer, container, options, selfOption) {\n    this.viewer = viewer;\n    this.container = container;\n    this.options = options;\n    this.beeController = selfOption.controllerModel;\n    this.selectedModel = null;\n    // AOA Initial Setup\n    this.aoa = {\n      id: \"4219\",\n      position: [0, 0, 7],\n      rotation: [0, 0, 0],\n    };\n    this.id_AOA = null;\n  }\n\n  AOAsetup() {\n    const aoaContainer = document.createElement(\"div\");\n    aoaContainer.innerHTML = `\n    <div class=\"container-bee\">\n    <button type=\"button\" class=\"collapsible\"><div class=\"glyphicon glyphicon-modal-window\"/><span>AOA Setup</span></button>\n    <div class=\"content\">\n      <div class=\"aoa-bee\">\n        <form id=\"form-add-aoa\">\n          <input\n            type=\"text\"\n            name=\"aoa-id\"\n            id=\"aoa-id\"\n            class=\"input-position\"\n          />\n          <label for=\"aoa-id\">aoa-tag</label>\n          <button class=\"button-bee-aoa aoa-config\" id=\"create-aoa\">\n            ADD\n          </button>\n        </form>\n        <button class=\"button-bee-aoa aoa-config\" id=\"delete-aoa\">DELETE</button>\n      </div>\n      <form id=\"form-edit-aoa\">\n        <div>\n          <input\n            type=\"number\"\n            name=\"x\"\n            id=\"x\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"x\">x (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"y\"\n            id=\"y\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"y\">y (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"z\"\n            id=\"z\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"z\">z (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"angle\"\n            id=\"angle\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"angle\">angle (&deg)</label>\n        </div>\n        <button type=\"submit\" class=\"button-bee\">SET</button>\n      </form>\n    </div>\n  </div>\n    `;\n    this.container.append(aoaContainer);\n  }\n\n  AOAexistence() {\n    const formCreateAOA = document.getElementById(\"form-add-aoa\");\n    if (!formCreateAOA) return;\n\n    formCreateAOA.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.id_AOA = formCreateAOA.elements.namedItem(\"aoa-id\").value;\n      if (this.id_AOA !== \"\" && this.id_AOA !== undefined) {\n        this.beeController.addAOA(\n          this.id_AOA ?? this.aoa.position,\n          this.aoa.position,\n          this.aoa.rotation\n        );\n      } else {\n        alert(\"Id is not correct\");\n      }\n    });\n\n    const deleteAOA = document.getElementById(\"delete-aoa\");\n    if (!deleteAOA) return;\n\n    deleteAOA.addEventListener(\"click\", () => {\n      if (this.selectedModel) {\n        this.viewer.impl.unloadModel(this.selectedModel);\n      } else {\n        alert(\"There is no AOA selected!\");\n      }\n    });\n  }\n\n  updateAOA() {\n    const formEditAOA = document.getElementById(\"form-edit-aoa\");\n    if (!formEditAOA) return;\n\n    formEditAOA.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.valueAOA_X = formEditAOA.elements.namedItem(\"x\").value;\n      this.valueAOA_Y = formEditAOA.elements.namedItem(\"y\").value;\n      this.valueAOA_Z = formEditAOA.elements.namedItem(\"z\").value;\n      this.valueAOA_Rotation = formEditAOA.elements.namedItem(\"angle\").value;\n      if (\n        !isNaN(this.valueAOA_X) &&\n        this.valueAOA_X !== \"\" &&\n        this.valueAOA_X !== undefined &&\n        !isNaN(this.valueAOA_Y) &&\n        this.valueAOA_Y !== \"\" &&\n        this.valueAOA_Y !== undefined &&\n        !isNaN(this.valueAOA_Z) &&\n        this.valueAOA_Z !== \"\" &&\n        this.valueAOA_Z !== undefined &&\n        !isNaN(this.valueAOA_Rotation) &&\n        this.valueAOA_Rotation !== \"\" &&\n        this.valueAOA_Rotation !== undefined\n      ) {\n        if (this.selectedModel) {\n          const translation = new THREE.Matrix4().makeTranslation(\n            this.valueAOA_X,\n            this.valueAOA_Y,\n            this.valueAOA_Z\n          );\n\n          const angleRadian = CoordinateConverter.degreeToRadian(\n            this.valueAOA_Rotation\n          );\n          const rotationAOA = new THREE.Matrix4().makeRotationZ(angleRadian);\n          this.selectedModel.setPlacementTransform(\n            translation.multiply(rotationAOA)\n          );\n        } else {\n          alert(\"There is no AOA selected\");\n        }\n      }\n    });\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n\n  AOASelected(selectedModel) {\n    this.selectedModel = selectedModel;\n  }\n\n  AOAclear() {\n    this.selectedModel = null;\n  }\n}\n","import { CoordinateConverter } from \"../CoordinateConverter\";\n\nexport class Building {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n  }\n\n  buildingSetup() {\n    const containerInput = document.createElement(\"div\");\n    containerInput.innerHTML = `\n    <div class=\"container-bee\">\n    <button type=\"button\" class=\"collapsible\"><div class=\"glyphicon glyphicon-blackboard\"/><span>Building Setup</span></button>\n    <div class=\"content\">\n      <div class=\"latlong-bee\">\n        <div id=\"lat-bee\">Lat :</div>\n        <div id=\"long-bee\">Long :</div>\n      </div>\n\n      <form id=\"form-building\">\n        <div>\n          <input\n            type=\"number\"\n            name=\"x\"\n            id=\"x\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"x\">x (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"y\"\n            id=\"y\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"y\">y (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"z\"\n            id=\"z\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"z\">z (m)</label>\n        </div>\n\n        <div>\n          <input\n            type=\"number\"\n            name=\"angle\"\n            id=\"angle\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"angle\">angle (&deg)</label>\n        </div>\n        <button type=\"submit\" class=\"button-bee\">SET</button>\n      </form>\n      <div class=\"button-bee\" id=\"button-show-hide-building\">HIDE BUILDING\n      <div class=\"glyphicon glyphicon-eye-close\"/>\n      </div>\n    </div>\n  </div>\n    `;\n\n    this.container.append(containerInput);\n  }\n\n  updateBuilding() {\n    const formBuilding = document.getElementById(\"form-building\");\n\n    if (!formBuilding) return;\n\n    formBuilding.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.valueX = formBuilding.elements.namedItem(\"x\").value;\n      this.valueY = formBuilding.elements.namedItem(\"y\").value;\n      this.valueZ = formBuilding.elements.namedItem(\"z\").value;\n      this.valueRot = formBuilding.elements.namedItem(\"angle\").value;\n      if (\n        !isNaN(this.valueX) &&\n        this.valueX !== \"\" &&\n        this.valueX !== undefined &&\n        !isNaN(this.valueY) &&\n        this.valueY !== \"\" &&\n        this.valueY !== undefined &&\n        !isNaN(this.valueZ) &&\n        this.valueZ !== \"\" &&\n        this.valueZ !== undefined &&\n        !isNaN(this.valueRot) &&\n        this.valueRot !== \"\" &&\n        this.valueRot !== undefined\n      ) {\n        const xform = this.viewer.model.getPlacementTransform().clone();\n        const translation = new THREE.Matrix4().makeTranslation(\n          this.valueX,\n          this.valueY,\n          this.valueZ\n        );\n        const angleRadian = CoordinateConverter.degreeToRadian(this.valueRot);\n        const rotation = new THREE.Matrix4().makeRotationZ(angleRadian);\n        xform.multiply(translation);\n        xform.multiply(rotation);\n        this.viewer.model.setPlacementTransform(xform);\n      }\n    });\n  }\n\n  updateLatLong(position) {\n    const lat = document.getElementById(\"lat-bee\");\n    const long = document.getElementById(\"long-bee\");\n\n    if (!lat || !long) return;\n\n    lat.innerText = `Lat : ${position.latitude}`;\n    long.innerText = `Long: ${position.longitude}`;\n  }\n\n  updateVisibility() {\n    const buttonVisibility = document.getElementById(\n      \"button-show-hide-building\"\n    );\n    if (!buttonVisibility) return;\n    buttonVisibility.addEventListener(\"click\", async () => {\n      this.enabled = !this.enabled;\n      if (this.enabled) {\n        const instanceTree = this.viewer.model.getData().instanceTree;\n        const rootId = instanceTree.getRootId();\n        this.viewer.hide(rootId);\n      } else {\n        const instanceTree = this.viewer.model.getData().instanceTree;\n        const rootId = instanceTree.getRootId();\n        this.viewer.show(rootId);\n      }\n    });\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","export class RotateCamera {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n    this.started = false;\n  }\n\n  rotateCameraSetup() {\n    const rotateCameraContainer = document.createElement(\"div\");\n    const rotateCameraInput = document.createElement(\"input\");\n    const rotateCameraLabel = document.createElement(\"label\");\n\n    rotateCameraLabel.innerText = \"Rotate Camera\";\n\n    this.setAttributes(rotateCameraInput, {\n      type: \"checkbox\",\n      id: \"toggleRotate\",\n    });\n\n    rotateCameraContainer.append(rotateCameraInput, rotateCameraLabel);\n    rotateCameraInput.addEventListener(\"change\", () => {\n      if (rotateCameraInput.checked) {\n        this.started = true;\n        this.rotateCamera();\n        console.log(\"activate rotated camera\");\n      } else {\n        this.started = false;\n        console.log(\"unactivate rotated camera\");\n      }\n    });\n    this.container.append(rotateCameraContainer);\n  }\n\n  rotateCamera = () => {\n    if (this.started) {\n      requestAnimationFrame(this.rotateCamera);\n    }\n\n    const nav = this.viewer.navigation;\n    const up = nav.getCameraUpVector();\n    const axis = new THREE.Vector3(0, 0, 1);\n    const speed = (10.0 * Math.PI) / 180;\n    const matrix = new THREE.Matrix4().makeRotationAxis(axis, speed * 0.03);\n\n    let pos = nav.getPosition();\n    pos.applyMatrix4(matrix);\n    up.applyMatrix4(matrix);\n    nav.setView(pos, new THREE.Vector3(0, 0, 0));\n    nav.setCameraUpVector(up);\n    this.viewer.getState();\n  };\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","export class InitialModel {\n  constructor(viewer, option, selfOption) {\n    this.viewer = viewer;\n    this.option = option;\n    this.beeController = selfOption.controllerModel;\n    this.coordinateConverter = selfOption.converter;\n  }\n\n  setupInitialModel() {\n    this.initRestrictedArea();\n    this.initWorker();\n    this.initExcavator();\n  }\n\n  initRestrictedArea() {\n    const resCust = {\n      id: \"E143231A43\",\n      geoLocation: [\n        [121.51998, 25.07044],\n        [121.51981, 25.0702],\n        [121.52, 25.06996],\n        [121.5202, 25.07019],\n        [121.52051, 25.07027],\n        [121.52035, 25.07043],\n      ],\n      height: 5,\n    };\n\n    const newCoords = this.coordinateConverter.geographicToCartesian2D(\n      resCust.geoLocation\n    );\n\n    this.beeController.addCustomRestrictedArea(\n      resCust.id,\n      newCoords,\n      resCust.height\n    );\n  }\n\n  initExcavator() {\n    const excavatorProps = {\n      id: \"E1231A43\",\n      position: [5, 20, 0],\n      rotation: [0, 0, 0],\n    };\n\n    this.beeController.addExcavator(\n      excavatorProps.id,\n      excavatorProps.position,\n      excavatorProps.rotation\n    );\n  }\n\n  initWorker() {\n    const humaProp = {\n      id: \"12A312\",\n      position: [10, 10, 0],\n      rotation: [0, 0, 0],\n    };\n\n    this.beeController.addNewWorker(\n      humaProp.id,\n      humaProp.position,\n      humaProp.rotation\n    );\n  }\n\n  initBeacon() {\n    const beaconProp = {\n      id: \"E143231A43\",\n      position: [-5, 10, 0],\n      rotation: [0, 0, 0],\n    };\n    this.beeController.addBeacon(\n      beaconProp.id,\n      beaconProp.position,\n      beaconProp.rotation\n    );\n  }\n\n  gridAndWindDirection() {\n    this.beeController.addGrid();\n    this.beeController.addWindDirection(1233);\n  }\n}\n","export class MainConverter {\n  static getTypeOfModel(dbId) {\n    // model only receive int number\n    // tThus, after clicked the selected model need to convert and give an ID\n    let idDevice = \"\";\n    const typeModel = dbId.slice(0, 4);\n    switch (typeModel) {\n      case \"5001\":\n        idDevice = dbId.replace(/^.{4}/g, \"AOA-\");\n        break;\n      case \"5002\":\n        idDevice = dbId.replace(/^.{4}/g, \"Worker-\");\n        break;\n      case \"5003\":\n        idDevice = dbId.replace(/^.{4}/g, \"RA-\");\n        break;\n      case \"5004\":\n        idDevice = dbId.replace(/^.{4}/g, \"EXT-\");\n        break;\n      case \"5005\":\n        idDevice = dbId.replace(/^.{4}/g, \"BCN-\");\n        break;\n      default:\n        idDevice = dbId;\n        break;\n    }\n    return { idDevice };\n  }\n\n  static idToNumber(id) {\n    const numberId = parseInt(id.replace(/[^0-9]/g, \"\"));\n    return numberId;\n  }\n\n  static quaternionToAngle = (rotatedMatrix) => {\n    let vec = new THREE.Quaternion();\n    vec.setFromRotationMatrix(rotatedMatrix);\n    const _w = vec._w;\n    let angleRadian = 2 * Math.acos(_w);\n    const angle = (angleRadian * 180) / Math.PI;\n    return { angle };\n  };\n\n  static getRotationModel(rotatedMatrix) {\n    const Vx = rotatedMatrix.elements[0];\n    const Vy = rotatedMatrix.elements[1];\n\n    let radians;\n    if (Vx || Vy) {\n      radians = Math.atan2(Vy, Vx);\n    } else {\n      radians = 0;\n    }\n\n    if (radians < 0) {\n      radians += 2 * Math.PI;\n    }\n    const radiansToDegree = Math.round(radians * (180 / Math.PI));\n    return { angle: radiansToDegree };\n  }\n}\n","export class RestrictedArea {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n    this.selectedModelRA = null;\n  }\n\n  restrictedAreaSetup() {\n    const restrictedArea = document.createElement(\"div\");\n    restrictedArea.innerHTML = `\n    <div class=\"container-bee\">\n    <button type=\"button\" class=\"collapsible\"><div class=\"glyphicon glyphicon-warning-sign\"/><span>Restricted Area Setup</span></button>\n    <div class=\"content\">\n      <form id=\"form-edit-restricted\">\n        <div>\n          <input\n            type=\"number\"\n            name=\"x\"\n            id=\"x\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"x\">x (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"y\"\n            id=\"y\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"y\">y (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"z\"\n            id=\"z\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"z\">z (m)</label>\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            name=\"height\"\n            id=\"height\"\n            value=\"0\"\n            class=\"input-position\"\n          />\n          <label for=\"angle\">height (m)</label>\n        </div>\n        <button type=\"submit\" class=\"button-bee\">SET</button>\n      </form>\n    </div>\n  </div>\n    `;\n\n    this.container.append(restrictedArea);\n  }\n\n  updateREstricted() {\n    const formRestrictedArea = document.getElementById(\"form-edit-restricted\");\n    if (!formRestrictedArea) return;\n\n    formRestrictedArea.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.valueRA_X = formRestrictedArea.elements.namedItem(\"x\").value;\n      this.valueRA_Y = formRestrictedArea.elements.namedItem(\"y\").value;\n      this.valueRA_Z = formRestrictedArea.elements.namedItem(\"z\").value;\n      this.valueRA_H = formRestrictedArea.elements.namedItem(\"height\").value;\n\n      if (\n        !isNaN(this.valueRA_X) &&\n        this.valueRA_X !== \"\" &&\n        this.valueRA_X !== undefined &&\n        !isNaN(this.valueRA_Y) &&\n        this.valueRA_Y !== \"\" &&\n        this.valueRA_Y !== undefined &&\n        !isNaN(this.valueRA_Z) &&\n        this.valueRA_Z !== \"\" &&\n        this.valueRA_Z !== undefined &&\n        !isNaN(this.valueRA_H) &&\n        this.valueRA_H !== \"\" &&\n        this.valueRA_H !== undefined\n      ) {\n        if (this.selectedModelRA) {\n          this.translation = new THREE.Matrix4().makeTranslation(\n            this.valueRA_X,\n            this.valueRA_Y,\n            this.valueRA_Z\n          );\n          this.scale = new THREE.Matrix4().scale(\n            new THREE.Vector3(1, 1, this.valueRA_H)\n          );\n\n          this.selectedModelRA.setPlacementTransform(\n            this.translation.multiply(this.scale)\n          );\n        }\n      }\n    });\n  }\n\n  RASelected(model) {\n    this.selectedModelRA = model;\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n}\n","export class ObjectInfo {\n  constructor(viewer, container) {\n    this.viewer = viewer;\n    this.container = container;\n  }\n\n  objectInfoSetup() {\n    const infoPanel = document.createElement(\"div\");\n    infoPanel.innerHTML = `\n    <div class=\"container-bee\">\n      <button type=\"button\" class=\"collapsible\"><div class=\"glyphicon glyphicon-tags\"/><span>Object Info</span></button>\n      <div class=\"content\">\n        <div>Objet Info</div>\n        <div>ID: <span id=\"infoId\"></span></div>\n        <div>Position: <span id=\"infoPosition\"></span></div>\n        <div>Rotation: <span id=\"infoRotation\"></span></div>\n        <div>Latitude: <span id=\"infoLatitude\"></span></div>\n        <div>Longitude: <span id=\"infoLongitude\" class=\"info\"></span></div>\n      </div>\n    </div>\n        `;\n\n    this.container.append(infoPanel);\n  }\n\n  updateInfo(objectInfo) {\n    this.infoId = document.getElementById(\"infoId\");\n    this.infoPosition = document.getElementById(\"infoPosition\");\n    this.infoRotation = document.getElementById(\"infoRotation\");\n    this.infoLatitude = document.getElementById(\"infoLatitude\");\n    this.infoLongitude = document.getElementById(\"infoLongitude\");\n    this.infoId.innerText = objectInfo.id;\n    this.infoLatitude.innerText = objectInfo.latitude;\n    this.infoLongitude.innerText = objectInfo.longitude;\n    this.infoPosition.innerText = objectInfo.position;\n    this.infoRotation.innerText = objectInfo.rotation;\n  }\n\n  clearInfo() {\n    if (this.infoLatitude) this.infoLatitude.innerText = \"\";\n    if (this.infoLongitude) this.infoLongitude.innerText = \"\";\n    if (this.infoId) this.infoId.innerText = \"\";\n    if (this.infoPosition) this.infoPosition.innerText = \"\";\n    if (this.infoRotation) this.infoRotation.innerText = \"\";\n  }\n}\n","import \"../css/main.css\";\nimport { BeeInventorModel } from \"./BeeInventorModel\";\nimport { CoordinateConverter } from \"./CoordinateConverter\";\nimport { DarkMode } from \"./tools/DarkMode\";\nimport { TransformToolUI } from \"./tools/TransformTools\";\nimport { InfoCardUI } from \"./tools/InfoCard\";\nimport { AOAtools } from \"./tools/AOA\";\nimport { Building } from \"./tools/Building\";\nimport { RotateCamera } from \"./tools/RotateCamera\";\nimport { InitialModel } from \"./InitialSetupModel\";\nimport { MainConverter } from \"./MainConverter\";\nimport { RestrictedArea } from \"./tools/RestrictedArea\";\nimport { ObjectInfo } from \"./tools/ObjectInfo\";\n\nexport class BeeInventorPanel extends Autodesk.Viewing.UI.DockingPanel {\n  constructor(viewer, container, id, title, options) {\n    super(container, id, title, options);\n    this.viewer = viewer;\n    this.options = options;\n    // docking panel\n    this.container.classList.add(\"docking-panel-container-solid-color-a\");\n    this.container.style.cssText = `\n      top: 10px;\n      left: 10px;\n      width: 300px;\n      padding: 10px;\n      height: 500px;\n      resize: auto;\n    `;\n\n    this.containerInfo = document.createElement(\"div\");\n    this.containerInfo.className = \"containerInfo\";\n    this.container.append(this.containerInfo);\n\n    const genTool = document.createElement(\"div\");\n    genTool.className = \"generalTool\";\n    genTool.innerHTML = `\n    <div class=\"container-bee\">\n       <button type=\"button\" class=\"collapsible\"><div class=\"glyphicon glyphicon-tasks\"/><span>General Tool</span></button>\n       <div class=\"content\" id=\"containerGeneralTool\"></div>\n    </div>\n    `;\n    this.container.append(genTool);\n    this.containerGeneralTool = document.getElementById(\"containerGeneralTool\");\n\n    this.containerBuilding = document.createElement(\"div\");\n    this.containerBuilding.className = \"containerBuilding\";\n    this.container.append(this.containerBuilding);\n\n    this.containerAOA = document.createElement(\"div\");\n    this.containerAOA.className = \"containerAOA\";\n    this.container.append(this.containerAOA);\n\n    this.containerRestrictedArea = document.createElement(\"div\");\n    this.containerRestrictedArea.className = \"containerRA\";\n    this.container.append(this.containerRestrictedArea);\n\n    this.selectedModel = null;\n    this.selectedModelRotation = null;\n\n    this.aoa = {\n      id: \"4219\",\n      position: [0, 0, 2],\n      rotation: [0, 0, 0],\n    };\n\n    this.viewerContainer = document.querySelector(\n      `#${this.viewer.clientContainer.id}`\n    );\n\n    this.onSelection = this.onSelection.bind(this);\n    this.viewer.addEventListener(\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n      this.onSelection\n    );\n\n    this.socket = io(\"http://localhost:3333\");\n    this.beeController = new BeeInventorModel(this.viewer, this.options);\n    this.coordinateConverter = new CoordinateConverter(\n      25.069771049083982,\n      121.52045303099948\n    );\n\n    // init Model\n    this.initModel = new InitialModel(this.viewer, this.options, {\n      converter: this.coordinateConverter,\n      controllerModel: this.beeController,\n    });\n    this.initModel.gridAndWindDirection();\n    this.initModel.setupInitialModel();\n\n    this.getDataUWB();\n\n    // Object Info\n    this.objectInfo = new ObjectInfo(this.viewer, this.containerInfo);\n    this.objectInfo.objectInfoSetup();\n\n    // Building Setup\n    this.geoBuilding = this.coordinateConverter.getCenter();\n    this.buildingTool = new Building(this.viewer, this.containerBuilding);\n    this.buildingTool.buildingSetup();\n    this.buildingTool.updateBuilding();\n    this.buildingTool.updateLatLong(this.geoBuilding);\n    this.buildingTool.updateVisibility();\n\n    // AOA Setup\n    this.setupAOA = new AOAtools(this.viewer, this.containerAOA, this.options, {\n      controllerModel: this.beeController,\n    });\n    this.setupAOA.AOAsetup(this.selectedModel);\n    this.setupAOA.updateAOA();\n    this.setupAOA.AOAexistence();\n\n    // InfoCard Setup\n    this.infoCardTool = new InfoCardUI(this.viewer, this.containerGeneralTool);\n    this.infoCardTool.infoCardSetup();\n    this.infoCardTool.updateIconEvent(this.posModel);\n\n    // Transform Setup\n    this.transformTool = new TransformToolUI(\n      this.viewer,\n      this.containerGeneralTool\n    );\n    this.transformTool.transformToolSetup();\n\n    // Dark Mode Setup\n    this.darkMode = new DarkMode(this.viewer, this.containerGeneralTool);\n    this.darkMode.darkModeToolSetup();\n\n    // Rotate Camera Setup\n    this.rotateCamera = new RotateCamera(\n      this.viewer,\n      this.containerGeneralTool\n    );\n    this.rotateCamera.rotateCameraSetup();\n\n    this.restrictedArea = new RestrictedArea(\n      this.viewer,\n      this.containerRestrictedArea\n    );\n    this.restrictedArea.restrictedAreaSetup();\n    this.restrictedArea.updateREstricted();\n    this.collapseButton();\n  }\n\n  collapseButton() {\n    const coll = document.getElementsByClassName(\"collapsible\");\n    if (!coll) return;\n    for (let i = 0; i < coll.length; i++) {\n      coll[i].addEventListener(\"click\", function () {\n        coll[i].classList.toggle(\"activesetup\");\n        const content = coll[i].nextElementSibling;\n        if (content.style.display === \"block\") {\n          content.style.display = \"none\";\n        } else {\n          content.style.display = \"block\";\n        }\n      });\n    }\n  }\n\n  onSelection(event) {\n    const selSet = event.selections;\n    const firstSel = selSet[0];\n    this.infoCardTool.clearInfoCard();\n\n    if (firstSel) {\n      const listdbIds = firstSel.dbIdArray;\n      const dbidItem = listdbIds[0];\n      const typeModel = dbidItem.toString().slice(0, 3);\n      if (typeModel !== \"500\") return;\n\n      const model = firstSel.model;\n      this.selectedModel = model;\n\n      let translation = new THREE.Vector3(),\n        rotation = new THREE.Quaternion(),\n        scale = new THREE.Vector3();\n      model.getPlacementTransform().decompose(translation, rotation, scale);\n      const rotatedMatrix = model.getPlacementTransform();\n\n      const rotationValueZ = MainConverter.getRotationModel(rotatedMatrix);\n      this.selectedModelRotation = rotationValueZ;\n\n      let dbIds = firstSel.dbIdArray;\n      let firstDbId = dbIds[0];\n\n      const instanceTree = model.getData().instanceTree;\n      const fragList = model.getFragmentList();\n      let bounds = new THREE.Box3();\n      instanceTree.enumNodeFragments(\n        firstDbId,\n        (fragId) => {\n          let box = new THREE.Box3();\n          fragList.getWorldBounds(fragId, box);\n          bounds.union(box);\n        },\n        true\n      );\n\n      this.posModel = bounds.getCenter();\n      const positionGeo = this.coordinateConverter.cartesianToGeographic(\n        this.posModel.x,\n        this.posModel.y\n      );\n      const idModel = MainConverter.getTypeOfModel(firstDbId.toString());\n\n      const objectInfo = {\n        id: idModel.idDevice,\n        position: `${Math.floor(this.posModel.x)},${Math.floor(\n          this.posModel.y\n        )},${Math.floor(this.posModel.z)}`,\n        rotation: `${Math.floor(rotationValueZ.angle)}`,\n        latitude: positionGeo.latitude,\n        longitude: positionGeo.longitude,\n      };\n\n      this.objectInfo.updateInfo(objectInfo);\n\n      // put on the last\n      this.restrictedArea.RASelected(model);\n      this.infoCardTool.showIcon(firstDbId, objectInfo, this.posModel);\n      this.infoCardTool.selectedModel(model);\n      this.setupAOA.AOASelected(this.selectedModel);\n    } else {\n      this.selectedModel = null;\n      this.objectInfo.clearInfo();\n      this.infoCardTool.clearInfoCard();\n    }\n  }\n\n  getDataUWB() {\n    this.socket.on(\"UpdateUWB\", (data) => {\n      this.getDatasUWB(data);\n    });\n\n    this.socket.on(\"UpdateWorker\", (data) => {\n      this.getDatas(data);\n    });\n  }\n\n  getDatasUWB(datas) {\n    const datasAOA = datas;\n    const AOA_id = this.setupAOA.id_AOA;\n    const AOA = this.beeController.objects.get(AOA_id);\n\n    if (AOA) {\n      const AOAproperty = AOA.getPlacementTransform();\n\n      const AOAprops = {\n        position: {\n          x: AOAproperty.elements[12],\n          y: AOAproperty.elements[13],\n          z: AOAproperty.elements[14],\n        },\n        rotation: {\n          x: 0,\n          y: 0,\n          z: MainConverter.getRotationModel(AOAproperty).angle,\n        },\n      };\n\n      const coordAOA = this.coordinateConverter.calculateUWBPosition(\n        datasAOA.position.distance,\n        datasAOA.position.degree,\n        AOAprops.rotation.z,\n        AOAprops.position.x,\n        AOAprops.position.y\n      );\n\n      const beeObjects = this.beeController.objects;\n      if (!beeObjects.has(datasAOA.id)) {\n        this.beeController.addNewWorker(datasAOA.id, coordAOA);\n      } else {\n        const worker = this.beeController.objects.get(datasAOA.id);\n        worker.setPlacementTransform(\n          new THREE.Matrix4().setPosition({\n            x: coordAOA[0] ?? 0,\n            y: coordAOA[1] ?? 0,\n            z: AOAprops.position.z - 2 ?? 0,\n          })\n        );\n      }\n    }\n  }\n\n  getDatas(datas) {\n    const geo = this.coordinateConverter.cartesianToGeographic(\n      datas.position[0],\n      datas.position[1]\n    );\n    const positionPlant = this.coordinateConverter.geographicToCartesian(\n      datas.positionPlant[0],\n      datas.positionPlant[1]\n    );\n\n    const beeObjects = this.beeController.objects;\n    if (!beeObjects.has(datas.id)) {\n      this.beeController.addNewWorker(datas.id, datas.position);\n    } else {\n      const worker = beeObjects.get(datas.id);\n      worker.setPlacementTransform(\n        new THREE.Matrix4().setPosition({\n          x: datas.position[0],\n          y: datas.position[1],\n          z: datas.position[2],\n        })\n      );\n    }\n\n    if (!beeObjects.has(datas.idPlant)) {\n      this.beeController.addExcavator(datas.idPlant, positionPlant);\n    } else {\n      const plant = beeObjects.get(datas.idPlant);\n      plant.setPlacementTransform(\n        new THREE.Matrix4().setPosition({\n          x: positionPlant.x ?? 0,\n          y: positionPlant.y ?? 0,\n          z: positionPlant.z ?? 0,\n        })\n      );\n    }\n  }\n\n  setAttributes(el, attrs) {\n    for (let key in attrs) {\n      el.setAttribute(key, attrs[key]);\n    }\n  }\n\n  uninitialize() {\n    console.info(\"uninitialize\");\n    this.socket.close();\n    this.viewer.removeEventListener(\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n      this.onSelection\n    );\n    this.beeController.unloadModel();\n  }\n\n  handleAOAbyMouse() {\n    document.onmousemove = (event) => {\n      if (event.ctrlKey) {\n        const viewerContainer = document.querySelector(\n          `#${this.viewer.clientContainer.id}`\n        );\n        const containerSize = viewerContainer.getBoundingClientRect();\n\n        let res = this.viewer.impl.hitTest(\n          event.clientX - containerSize.left,\n          event.clientY - containerSize.top,\n          true,\n          null,\n          [this.viewer.model.getModelId()]\n        );\n        let pt = null;\n\n        if (res) {\n          pt = res.intersectPoint;\n        } else {\n          pt = viewer.impl.intersectGround(\n            event.clientX - containerSize.left,\n            event.clientY - containerSize.top\n          );\n        }\n\n        let tr = this.selectedModel.getPlacementTransform();\n        tr.elements[12] = pt.x;\n        tr.elements[13] = pt.y;\n        tr.elements[14] = pt.z;\n        this.selectedModel.setPlacementTransform(tr);\n        this.viewer.impl.invalidate(true, true, true);\n      }\n    };\n  }\n}\n","import { BeeInventorPanel } from \"./lib/BeeInventorPanel\";\nimport \"./css/main.css\";\n\n/* global Autodesk THREE */\nclass BeeInventor extends Autodesk.Viewing.Extension {\n  constructor(viewer, options) {\n    super(viewer, options);\n    this.viewer = viewer;\n    this.options = options;\n    this._button = null;\n    this._group = null;\n    this.panel = null;\n    this.grid = null;\n    this.destroy = null;\n  }\n\n  load() {\n    console.log(\"Docking Panel has been loaded !\");\n\n    return true;\n  }\n\n  unload() {\n    console.log(\"Docking Panel has been unloaded !\");\n    if (this.viewer.toolbar !== null)\n      this.viewer.toolbar.removeControl(this.subToolbar);\n    if (this.panel !== null) this.panel.setVisible(false);\n    if (this._group) {\n      this._group.removeControl(this._button);\n      if (this._group.getNumberOfControls() === 0) {\n        this.viewer.toolbar.removeControl(this._group);\n      }\n    }\n    return true;\n  }\n\n  onToolbarCreated() {\n    this._group = this.viewer.toolbar.getControl(\"BeeInventorToolbar\");\n    if (!this._group) {\n      this._group = new Autodesk.Viewing.UI.ControlGroup(\"BeeInventorToolbar\");\n      this.viewer.toolbar.addControl(this._group);\n    }\n    this._button = new Autodesk.Viewing.UI.Button(\"Docking Panel\");\n    this._button.onClick = () => {\n      if (this.panel === null) {\n        this.panel = new BeeInventorPanel(\n          this.viewer,\n          this.viewer.container,\n          \"beeInventor\",\n          \"BeeInventor Extension\"\n        );\n      }\n      this.panel.setVisible(!this.panel.isVisible());\n    };\n    this._button.setToolTip(\"BeeInventor IoT\");\n    this._button.addClass(\"dockingPanel\");\n    this._group.addControl(this._button);\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  \"BeeInventor\",\n  BeeInventor\n);\n"],"names":["BeeInventorModel","viewer","options","dbId","geoLocation","height","length","loadExtension","sceneBuilder","addNewModel","modelNameOverride","conserveMemory","modelBuilder","globalMaterial","THREE","MeshBasicMaterial","color","Color","transparent","opacity","geoPoint","forEach","coord","push","Vector2","x","y","geoShape","Shape","geoGeometry","ShapeGeometry","extrudeSettings","amount","bevelEnabled","extrude","ExtrudeGeometry","computeFaceNormals","restrictedGeo","BufferGeometry","fromGeometry","customRestrictedArea","Mesh","userData","id","customRestrictedAreaId","idToNumber","parseInt","addMesh","customRestrictedAreaModel","model","objects","set","position","rotation","MeshPhongMaterial","torus","TorusGeometry","box","BoxGeometry","textGeometry","TextGeometry","font","size","curveSegments","textMesh","matrix","makeRotationX","setPosition","Vector3","scale","aoaMesh","aoaDir1","radians","Math","PI","makeRotationY","aoaDir2","aoaDir3","aoaGeo","Geometry","merge","geometry","computeVertexNormals","aoaBuff","aoa","aoaDBID","aoaModel","pos","Matrix4","makeRotationZ","setPlacementTransform","modelGeometry","head","SphereGeometry","body","humanIdMesh","headMesh","bodyMesh","humanModel","workerDBID","workerModel","compose","Quaternion","restrictedArea","restrictedAreaId","restrictedAreaModel","z","size_box","texture","ImageUtils","loadTexture","CDN_DOMAIN","minFilter","LinearFilter","excavatorMaterial","map","side","DoubleSide","boxGeometry","computeBoundingBox","excavatorMesh","excavatorGeo","excavatorBuffer","excavator","excavatorId","excavatorModel","sphere","beaconMesh","beaconGeo","beaconBuffer","beacon","beaconId","beaconModel","northGeometry","southGeometry","eastGeometry","westGeometry","radian","northMesh","southMesh","eastMesh","westMesh","windDirectionGeo","windDirectionBuff","windDirection","windDirectionModel","grid","GridHelper","material","rotateX","overlays","hasScene","addScene","restricted","boxMesh","values","impl","unloadModel","removeMesh","removeScene","this","Map","numberId","isNaN","replace","select","utilities","fitToView","mesh","console","log","updateMesh","size_X","size_Y","makeRotationFromQuaternion","getCamera","clone","quaternion","CoordinateConverter","latitude","longitude","φ1","degreeToRadian","center","φ2","Δφ","Δλ","a","sin","cos","c","atan2","sqrt","R","distanceX","distance","distanceY","abs","pi","xPos","yPos","newCoordinatesAfterRotate","i","BUILDING_CORNER_LOCATION","cartesianToGeographic","newCoordinateCartesian","geographicToCartesian","degree","cente","d","degreeAOA","directionDegree","deviceX","deviceY","r","newX","newY","positionEveryCorner","DarkMode","container","darkModeContainer","document","createElement","darkModeInput","darkModeLabel","innerText","setAttributes","type","append","addEventListener","checked","activate","deactivate","setBackgroundColor","el","attrs","key","setAttribute","TransformToolOverlay","TransformTool","Autodesk","Viewing","ToolInterface","_controls","_viewer","_fragments","_startPosition","_startTransform","_onCameraChange","bind","_onControlsChange","_onSelectionChange","selectedModel","names","register","deregister","getPriority","handleMouseMove","handleButtonDown","handleButtonUp","handleSingleClick","name","TransformControls","canvas","setSize","visible","attach","Object3D","CAMERA_CHANGE_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","removeEventListener","highResTimestamp","event","_dragging","onPointerMove","onPointerHover","button","onPointerDown","onPointerUp","update","ev","offset","subVectors","xform","elements","invalidate","firstSel","selections","dbIdArray","toString","slice","firstDbId","instanceTree","getData","fragList","getFragmentList","bounds","Box3","enumNodeFragments","fragId","getWorldBounds","union","getCenter","copy","getPlacementTransform","fragIds","frags","totalBounds","fragBounds","TransformToolName","TransformToolUI","_tool","transfromContainer","transformTool","transformToolLabel","_enableTransformTool","_disableTransformTool","alert","controller","toolController","registerTool","isToolActivated","activateTool","deactivateTool","InfoCardUI","infoCard","enabledIcon","selectedModelCard","updateIconsCallback","updateIcons","ISOLATE_EVENT","HIDE_EVENT","SHOW_EVENT","infoCardContainer","infoCardInput","InfoCardLabel","clearInfoCard","objectInfo","posModel","infoData","innerHTML","querySelector","clientContainer","appendChild","worldToClient","style","left","floor","offsetWidth","top","modelOutContainer","checkIfOutofContainer","display","camera","multiplyMatrices","projectionMatrix","matrixWorldInverse","frustum","Frustum","setFromMatrix","bbox","getBoundingBox","intersectsBox","remove","AOAtools","selfOption","beeController","controllerModel","id_AOA","aoaContainer","formCreateAOA","getElementById","e","preventDefault","namedItem","value","undefined","addAOA","deleteAOA","formEditAOA","valueAOA_X","valueAOA_Y","valueAOA_Z","valueAOA_Rotation","translation","makeTranslation","angleRadian","rotationAOA","multiply","Building","containerInput","formBuilding","valueX","valueY","valueZ","valueRot","lat","long","buttonVisibility","enabled","rootId","getRootId","hide","show","RotateCamera","started","requestAnimationFrame","rotateCamera","nav","navigation","up","getCameraUpVector","axis","speed","makeRotationAxis","getPosition","applyMatrix4","setView","setCameraUpVector","getState","rotateCameraContainer","rotateCameraInput","rotateCameraLabel","InitialModel","option","coordinateConverter","converter","initRestrictedArea","initWorker","initExcavator","newCoords","geographicToCartesian2D","addCustomRestrictedArea","addExcavator","addNewWorker","addBeacon","addGrid","addWindDirection","MainConverter","idDevice","rotatedMatrix","Vx","Vy","angle","round","vec","setFromRotationMatrix","_w","acos","RestrictedArea","selectedModelRA","formRestrictedArea","valueRA_X","valueRA_Y","valueRA_Z","valueRA_H","ObjectInfo","infoPanel","infoId","infoPosition","infoRotation","infoLatitude","infoLongitude","BeeInventorPanel","UI","DockingPanel","title","classList","add","cssText","containerInfo","className","genTool","containerGeneralTool","containerBuilding","containerAOA","containerRestrictedArea","selectedModelRotation","viewerContainer","onSelection","socket","io","initModel","gridAndWindDirection","setupInitialModel","getDataUWB","objectInfoSetup","geoBuilding","buildingTool","buildingSetup","updateBuilding","updateLatLong","updateVisibility","setupAOA","AOAsetup","updateAOA","AOAexistence","infoCardTool","infoCardSetup","updateIconEvent","transformToolSetup","darkMode","darkModeToolSetup","rotateCameraSetup","restrictedAreaSetup","updateREstricted","collapseButton","coll","getElementsByClassName","toggle","content","nextElementSibling","decompose","rotationValueZ","getRotationModel","positionGeo","getTypeOfModel","updateInfo","RASelected","showIcon","AOASelected","clearInfo","on","data","getDatasUWB","getDatas","datas","datasAOA","AOA_id","AOA","get","AOAproperty","AOAprops","coordAOA","calculateUWBPosition","has","positionPlant","beeObjects","idPlant","info","close","onmousemove","ctrlKey","pt","containerSize","getBoundingClientRect","res","hitTest","clientX","clientY","getModelId","intersectPoint","intersectGround","tr","BeeInventor","Extension","_button","_group","panel","destroy","toolbar","removeControl","subToolbar","setVisible","getNumberOfControls","getControl","ControlGroup","addControl","Button","onClick","isVisible","setToolTip","addClass","theExtensionManager","registerExtension"],"sourceRoot":""}